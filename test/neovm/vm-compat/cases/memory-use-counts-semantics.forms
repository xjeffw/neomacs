(fboundp 'memory-use-counts)
(let ((counts (memory-use-counts)))
  (and (listp counts)
       (= (length counts) 7)))
(let ((counts (memory-use-counts)))
  (and (numberp (nth 0 counts))
       (numberp (nth 1 counts))
       (numberp (nth 2 counts))
       (numberp (nth 3 counts))
       (numberp (nth 4 counts))
       (numberp (nth 5 counts))
       (numberp (nth 6 counts))))
(condition-case err (memory-use-counts 1) (wrong-number-of-arguments (car err)))
