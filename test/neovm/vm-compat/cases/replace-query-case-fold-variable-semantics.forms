(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (let ((case-fold-search nil))
    (replace-string "a" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (replace-string "a" "x")
  (buffer-string))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t))
    (replace-string "A" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (let ((case-fold-search nil))
    (replace-regexp "a" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (replace-regexp "a" "x")
  (buffer-string))

(with-temp-buffer
  (insert "a")
  (goto-char (point-min))
  (let ((case-fold-search t))
    (replace-regexp "A" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (let ((case-fold-search nil)
        (unread-command-events (list ?!)))
    (query-replace "a" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (let ((unread-command-events (list ?!)))
    (query-replace "a" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (let ((case-fold-search nil)
        (unread-command-events (list ?!)))
    (query-replace-regexp "a" "x"))
  (buffer-string))

(with-temp-buffer
  (insert "A")
  (goto-char (point-min))
  (let ((unread-command-events (list ?!)))
    (query-replace-regexp "a" "x"))
  (buffer-string))
