; where-is-internal evaluator-backed semantics.

(condition-case err
    (keymapp (make-keymap))
  (error (car err)))
(condition-case err
    (keymapp (make-keymap nil))
  (error (car err)))
(condition-case err
    (make-keymap nil nil)
  (error (car err)))

(condition-case err
    (keymapp (make-sparse-keymap))
  (error (car err)))
(condition-case err
    (keymapp (make-sparse-keymap 1))
  (error (car err)))
(condition-case err
    (make-sparse-keymap nil nil)
  (error (car err)))

(condition-case err
    (where-is-internal 'ignore 'not-a-map)
  (error err))

(where-is-internal 1)

(let ((m (make-sparse-keymap)))
  (define-key m "a" 'ignore)
  (equal (car (where-is-internal 'ignore m)) [97]))

(let ((m (make-sparse-keymap)))
  (define-key m "a" 'ignore)
  (equal (where-is-internal 'ignore m t) [97]))

(let ((m (make-sparse-keymap)))
  (define-key m "a" 'ignore)
  (not (null (member [97] (where-is-internal 'ignore m)))))

(let ((m (make-sparse-keymap)))
  (define-key m "a" 'ignore)
  (vectorp (where-is-internal 'ignore m t)))
