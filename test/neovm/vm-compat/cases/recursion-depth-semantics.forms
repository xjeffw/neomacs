; Lock in recursion-depth basic behavior.

(fboundp 'recursion-depth)
(special-form-p 'recursion-depth)
(integerp (recursion-depth))
(condition-case err
    (recursion-depth 1)
  (error (car err)))
(let* ((base (recursion-depth))
       (probe (make-symbol "neovm-recursion-depth-probe")))
  (fset
   probe
   (lambda (n)
     (if (= n 0)
         (recursion-depth)
       (funcall (symbol-function probe) (1- n)))))
  (let ((deep (funcall (symbol-function probe) 3)))
    (list (integerp base) (integerp deep))))
