(fboundp 'keymap-parent)
(fboundp 'set-keymap-parent)

(condition-case err
    (let ((a (make-sparse-keymap))
          (b (make-sparse-keymap)))
      (set-keymap-parent a b)
      (equal (keymap-parent a) b))
  (error err))

(condition-case err
    (let ((a (make-sparse-keymap))
          (b (make-sparse-keymap)))
      (set-keymap-parent a b)
      (set-keymap-parent a nil)
      (keymap-parent a))
  (error err))

(condition-case err (keymap-parent) (error (car err)))
(condition-case err (set-keymap-parent) (error (car err)))
(condition-case err (keymap-parent "x") (error (car err)))
(condition-case err (set-keymap-parent "x" nil) (error (car err)))
