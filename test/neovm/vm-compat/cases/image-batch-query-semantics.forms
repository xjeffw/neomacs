(fboundp 'image-size)
(fboundp 'image-mask-p)

(condition-case err
    (image-size nil)
  (error err))
(condition-case err
    (image-mask-p nil)
  (error err))

(condition-case err
    (image-size (create-image "x" 'pbm t))
  (error err))
(condition-case err
    (image-size (create-image "x" 'pbm t) t)
  (error err))
(condition-case err
    (image-size (create-image "x" 'pbm t) nil nil)
  (error err))
(condition-case err
    (image-size (create-image "x" 'pbm t) nil nil nil)
  (error (car err)))

(condition-case err
    (image-mask-p (create-image "x" 'pbm t))
  (error err))
(condition-case err
    (image-mask-p (create-image "x" 'pbm t) nil)
  (error err))
(condition-case err
    (image-mask-p (create-image "x" 'pbm t) nil nil)
  (error (car err)))
