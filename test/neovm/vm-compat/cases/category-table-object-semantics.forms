(fboundp 'category-table)
(fboundp 'standard-category-table)
(fboundp 'set-category-table)
(fboundp 'make-category-table)
(category-table-p (category-table))
(category-table-p (standard-category-table))
(let ((tbl (make-category-table)))
  (and (category-table-p tbl)
       (eq (set-category-table tbl) tbl)))
(let ((orig (category-table))
      (tbl (make-category-table)))
  (set-category-table tbl)
  (prog1 (eq (category-table) tbl)
    (set-category-table orig)))
(condition-case err
    (set-category-table 1)
  (error (list (car err) (cadr err))))
(condition-case err
    (category-table nil)
  (wrong-number-of-arguments (car err)))
(let ((orig (category-table))
      (tbl (make-category-table)))
  (set-category-table tbl)
  (prog1 (let ((after (set-category-table nil)))
           (list (category-table-p after)
                 (eq after (category-table))
                 (eq after (standard-category-table))))
    (set-category-table orig)))
(let ((orig (category-table)))
  (prog1 (let ((after (set-category-table nil)))
           (eq after (standard-category-table)))
    (set-category-table orig)))
