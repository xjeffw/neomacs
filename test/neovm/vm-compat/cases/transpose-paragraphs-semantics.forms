; transpose-paragraphs should mirror Emacs paragraph boundary and error behavior.
(condition-case err
    (with-temp-buffer
      (insert (concat "A" (make-string 1 10) (make-string 1 10) "B"))
      (goto-char 1)
      (transpose-paragraphs 1)
      (subst-char-in-string 10 ?| (buffer-string) t))
  (error err))

(condition-case err
    (with-temp-buffer
      (insert (concat "A" (make-string 1 10) (make-string 1 10) "B"))
      (goto-char (point-max))
      (transpose-paragraphs 1)
      (subst-char-in-string 10 ?| (buffer-string) t))
  (error err))

(condition-case err
    (with-temp-buffer
      (insert
       (concat
        "A" (make-string 1 10) (make-string 1 10)
        "B" (make-string 1 10) (make-string 1 10) "C"))
      (goto-char 1)
      (transpose-paragraphs 2)
      (subst-char-in-string 10 ?| (buffer-string) t))
  (error err))

(condition-case err
    (with-temp-buffer
      (insert
       (concat
        "A" (make-string 1 10) (make-string 1 10)
        "B" (make-string 1 10) (make-string 1 10) "C"))
      (goto-char (point-max))
      (transpose-paragraphs -1)
      (subst-char-in-string 10 ?| (buffer-string) t))
  (error err))

(condition-case err
    (with-temp-buffer
      (insert (concat "A" (make-string 1 10) (make-string 1 10)))
      (goto-char 1)
      (transpose-paragraphs 1)
      (subst-char-in-string 10 ?| (buffer-string) t))
  (error err))
