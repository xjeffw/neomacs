; KEYS vector argument does not publish command-loop events to recent-keys in batch.
(let ((start (length (recent-keys))))
  (progn
    (command-execute 'ignore nil [97])
    (append (nthcdr start (append (recent-keys) nil)) nil)))

(let ((start (length (recent-keys))))
  (progn
    (call-interactively 'ignore nil [98])
    (append (nthcdr start (append (recent-keys) nil)) nil)))

(progn
  (fset 'neo-rk-probe
        (lambda ()
          (interactive)
          (list (this-command-keys) (this-command-keys-vector))))
  'probe-installed)

(command-execute 'neo-rk-probe nil [99])
(call-interactively 'neo-rk-probe nil [100])

(let ((start (length (recent-keys))))
  (progn
    (command-execute 'neo-rk-probe nil [101])
    (append (nthcdr start (append (recent-keys) nil)) nil)))

(let ((start (length (recent-keys))))
  (progn
    (call-interactively 'neo-rk-probe nil [102])
    (append (nthcdr start (append (recent-keys) nil)) nil)))
