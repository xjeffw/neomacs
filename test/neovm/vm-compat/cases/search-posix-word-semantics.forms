; Lock in evaluator-backed behavior for posix/word search builtins.
(fboundp 'posix-search-forward)
(fboundp 'posix-search-backward)
(fboundp 'word-search-forward)
(fboundp 'word-search-backward)

(with-temp-buffer
  (insert "foo baaar baz")
  (goto-char (point-min))
  (posix-search-forward "ba+r"))
(with-temp-buffer
  (insert "foo baaar baz")
  (goto-char (point-min))
  (posix-search-forward "zz+" nil t))
(with-temp-buffer
  (insert "foo baaar baz")
  (goto-char (point-min))
  (condition-case err (posix-search-forward "zz+") (error (car err))))
(with-temp-buffer
  (insert "foo baaar baz")
  (goto-char (point-max))
  (posix-search-backward "ba+r"))
(with-temp-buffer
  (insert "foo baaar baz")
  (goto-char (point-max))
  (posix-search-backward "zz+" nil t))
(with-temp-buffer
  (insert "foo baaar baz")
  (goto-char (point-max))
  (condition-case err (posix-search-backward "zz+") (error (car err))))

(with-temp-buffer
  (insert "alpha beta alpha")
  (goto-char (point-min))
  (word-search-forward "beta"))
(with-temp-buffer
  (insert "alpha beta alpha")
  (goto-char (point-min))
  (word-search-forward "gamma" nil t))
(with-temp-buffer
  (insert "alpha beta alpha")
  (goto-char (point-min))
  (condition-case err (word-search-forward "gamma") (error (car err))))
(with-temp-buffer
  (insert "alpha beta alpha")
  (goto-char (point-max))
  (word-search-backward "beta"))
(with-temp-buffer
  (insert "alpha beta alpha")
  (goto-char (point-max))
  (word-search-backward "gamma" nil t))
(with-temp-buffer
  (insert "alpha beta alpha")
  (goto-char (point-max))
  (condition-case err (word-search-backward "gamma") (error (car err))))

(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-min))
  (condition-case err (posix-search-forward 1) (error (car err))))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-min))
  (condition-case err (word-search-forward 1) (error (car err))))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-min))
  (posix-search-forward "beta" nil t 0))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-min))
  (word-search-forward "beta" nil t 0))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-max))
  (posix-search-backward "beta" nil t 0))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-max))
  (word-search-backward "beta" nil t 0))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-min))
  (condition-case err (posix-search-forward "beta" nil t -1) (error (car err))))
(with-temp-buffer
  (insert "alpha beta")
  (goto-char (point-min))
  (condition-case err (word-search-forward "beta" nil t -1) (error (car err))))
